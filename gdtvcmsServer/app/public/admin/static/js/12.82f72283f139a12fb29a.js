webpackJsonp([12],{"1kpU":function(t,e,a){"use strict";var i=a("mtWM"),o=a.n(i);e.a={created:function(){this.Getpaging()},data:function(){return{tableData:[],SelectData:"",Status:"2",offset:"0",total1:null,limit:10,currentPage4:1}},methods:{timeChange:function(t,e){var a=this;if(this.tableData[e.$index].START_TIME!=this.tableData[e.$index].timeRange[0]||this.tableData[e.$index].END_TIME!=this.tableData[e.$index].timeRange[1]){var i={START_TIME:this.tableData[e.$index].timeRange[0],END_TIME:this.tableData[e.$index].timeRange[1]};o.a.post("/describe/UpdateCMSTAG",{RECID:e.row.RECID,params:i}).then(function(t){e.row.START_TIME=a.tableData[e.$index].timeRange[0],e.row.END_TIME=a.tableData[e.$index].timeRange[1]})}},Getpaging:function(){var t=[],e=this;o.a.get("/describe/ProDec?offset="+this.offset+"&limit="+this.limit+"&title="+this.SelectData+"&status="+this.Status).then(function(a){e.total1=a.data.count;for(var i=a.data.rows,n=0;n<a.data.rows.length;n++)t.push(a.data.rows[n].POSITION_CODE),"1"==a.data.rows[n].STATUS?a.data.rows[n].STATUS=!0:a.data.rows[n].STATUS=!1,a.data.rows[n].START_TIME||(i[n].START_TIME="未设置"),a.data.rows[n].END_TIME||(i[n].END_TIME="未设置"),a.data.rows[n].Price=!0;o.a.post("/describe/getPosition",{position:t}).then(function(t){for(var a=0;a<t.data.length;a++)i[a].POSITION=t.data[a].memo;e.tableData=i})})},buttonChange:function(t,e){var a="";a=t?1:0;var i={STATUS:a};o.a.post("/describe/UpdateCMSTAG",{RECID:e.row.RECID,params:i}).then(function(t){})},onSubmit:function(){var t=[],e=this;o.a.get("/describe/ProDec?offset="+this.offset+"&limit="+this.limit+"&title="+this.SelectData+"&status="+this.Status).then(function(a){e.total1=a.data.count;for(var i=a.data.rows,n=0;n<a.data.rows.length;n++)t.push(a.data.rows[n].POSITION_CODE),"1"==a.data.rows[n].STATUS?a.data.rows[n].STATUS=!0:a.data.rows[n].STATUS=!1,a.data.rows[n].START_TIME||(i[n].START_TIME="未设置"),a.data.rows[n].END_TIME||(i[n].END_TIME="未设置"),a.data.rows[n].Price=!0;o.a.post("/describe/getPosition",{position:t}).then(function(t){for(var a=0;a<t.data.length;a++)i[a].POSITION=t.data[a].memo;e.tableData=i})})},handleCurrentChange:function(t){this.offset=(t-1)*this.limit},handleSizeChange:function(t){this.limit=t},change:function(t){var e="";t.row.STATUS?(e=0,t.row.STATUS=!1):(e=1,t.row.STATUS=!0),o.a.get("/describe/status?status="+e+"&Id="+t.row.RECID).then(function(){})},edit:function(t){var e=window.location.href.split("#")[0]+"#/PdTag/"+t.row.RECID;window.open(e)},add:function(){var t=window.location.href.split("#")[0]+"#/PdTag";window.open(t)},del:function(t,e,a){var i=this;this.$confirm("此操作将永久删除该专题, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$message({type:"success",message:"删除成功!"});a.splice(t,1),o.a.get("/describe/DeleteProDec?RECID="+e.RECID).then(function(t){}),o.a.get("/describe/DeleteCmsProductTagRef?CODE="+e.RECID).then(function(t){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},ChangePrice:function(t,e){this.True=!1,t.row.Price=!1;var e=this;setTimeout(function(){e.True||(t.row.Price=!0)},1e3)},err:function(t,e){this.$notify.error({title:t,message:e})},open:function(t,e){this.$notify({title:t,message:e,type:"success"})},Blur:function(t){var e=this;isNaN(t.row.SORT)?this.err("失败","不能包含字母，请重新输入"):(this.SORT!=t.row.SORT&&o.a.post("/describe/status",{RECID:this.Good.RECID,SORT:this.Good.SORT}).then(function(a){e.open("成功","排序修改成功"),t.row.Price=!0}),t.row.Price=!0)},focus:function(t){this.Good=t.row,this.sort=t.row.sort,this.True=!0}},watch:{SelectData:function(t){t||this.onSubmit()},offset:function(){this.Getpaging()},limit:function(){this.Getpaging()}}}},H7to:function(t,e,a){"use strict";function i(t){a("gqSQ")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("1kpU"),n=a("MZh3"),r=a("VU/8"),s=i,l=r(o.a,n.a,!1,s,null,null);e.default=l.exports},MZh3:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view-content"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{width:"70%"},attrs:{inline:!0}},[a("el-form-item",{staticClass:"ttsearch"},[a("el-input",{attrs:{placeholder:"标题搜索"},model:{value:t.SelectData,callback:function(e){t.SelectData=e},expression:"SelectData"}})],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{"text-align":"center",width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.Status,callback:function(e){t.Status=e},expression:"Status"}},[a("el-option",{staticStyle:{"text-align":"center"},attrs:{label:"--状态--",value:"2"}}),t._v(" "),a("el-option",{staticStyle:{"text-align":"center"},attrs:{label:"上架",value:"1"}}),t._v(" "),a("el-option",{staticStyle:{"text-align":"center"},attrs:{label:"下架",value:"0"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")])],1)],1)],1)]),t._v(" "),a("el-card",{staticClass:"box-card1"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-table",{staticStyle:{width:"auto"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"TITLE",label:"标题",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.URL,target:"_blank"}},[t._v(t._s(e.row.TITLE))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-date-picker",{attrs:{change:t.timeChange(e.row.timeRange,e),type:"datetimerange","range-separator":"至","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.row.timeRange,callback:function(a){t.$set(e.row,"timeRange",a)},expression:"scope.row.timeRange"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"POSITION",label:"位置",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#909399"},on:{change:function(a){t.buttonChange(e.row.STATUS,e)}},model:{value:e.row.STATUS,callback:function(a){t.$set(e.row,"STATUS",a)},expression:"scope.row.STATUS"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"SORT",label:"排序",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.Price?a("div",[a("el-button",{staticStyle:{border:"1px"},on:{click:function(a){t.ChangePrice(e,this)}}},[a("i",{staticClass:"el-icon-edit"}),t._v(t._s(e.row.SORT))])],1):a("div",[a("el-input",{staticStyle:{"text-align":"center",border:"1px solid #ccc","border-radius":"6px"},on:{blur:function(a){t.Blur(e)},focus:function(a){t.focus(e)}},model:{value:e.row.SORT,callback:function(a){t.$set(e.row,"SORT",a)},expression:"scope.row.SORT"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.edit(e)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.del(e.$index,e.row,t.tableData)}}},[t._v("删除")])]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage4,"page-sizes":[10,20,40,60,80,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total1},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)},o=[],n={render:i,staticRenderFns:o};e.a=n},gqSQ:function(t,e,a){var i=a("lSev");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("3af71fdd",i,!0)},lSev:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"body .el-date-range-picker,body .el-picker-panel,body .el-popper,element.style{left:200px}.box-card{width:100%}.view-content{width:98%;-webkit-box-sizing:border-box;box-sizing:border-box}.el-card__body{display:none}.demo-form-inline .el-form-item{margin-bottom:8px}.cell img{width:80px;height:40px}.block{width:100%;height:40px;line-height:40px;font-size:16px}.cell{text-align:center}.el-table__body{margin:0 atuo}.view-content .block{width:50%;padding:30px}a{text-decoration:none;color:#5a5e66}.el-form-item__content{width:100%;margin-bottom:0}.demo-form-inline .el-form-item{margin-bottom:0}.el-submenu .el-menu-item{min-width:10%}.el-switch{height:23px;line-height:23px}",""])}});