webpackJsonp([8],{CfED:function(t,e,o){"use strict";var l=o("mvHQ"),s=o.n(l),i=o("mtWM"),a=o.n(i);e.a={data:function(){return{Image:[],show:!0,value:"1",value1:"0",dialogFormVisible1:!1,Code:"",Good:null,form:{},fileList:[],DataShow:!1,SelectData:"",ModelGood:{productNo:"",title:"",memo:"",salePrice:"",sort:"",status:"",url:"",relationCode:"",kind:"specialactivity"},rules:{sort:{validator:function(t,e,o){isNaN(e)?o(new Error("请输入数字值")):o()},trigger:"blur"},salePrice:{validator:function(t,e,o){isNaN(e)?o(new Error("请输入数字值")):o()},trigger:"blur"},productNo:{validator:function(t,e,o){if(!e)return o(new Error("产品编号不能为空"));isNaN(e)?o(new Error("请输入数字值")):o()},trigger:"blur"}},currentPage4:1}},created:function(){this.$store.dispatch("GetCodeGoods"),this.floorGoods?this.DataShow=!0:this.DataShow=!1,this.fileList=[];var t={};t.url=this.$store.state.floor.Image,this.fileList.push(t),this.ModelGood.relationCode=this.$store.state.floor.Code},computed:{floorGoodLimit:function(){return this.$store.state.floorGoodLimit},floorGoodCount:function(){return this.$store.state.floorGoodCount},floorGoods:function(){return this.$store.state.floorGoods},floor:function(){return this.$store.state.floor},floorGoodOffset:function(){return this.$store.state.floorGoodOffset}},watch:{floorGoodOffset:function(){this.$store.dispatch("GetCodeGoods")},SelectData:function(t){t||this.$store.dispatch("GetCodeGoods")}},methods:{clear:function(){this.SelectData=""},Select:function(){var t=this;a.a.get("/server/GetByNum?Num="+this.SelectData+"&code="+this.$store.state.floor.Code).then(function(e){t.$store.state.floorGoods=e.data})},back:function(){this.$router.push({name:"scsp"})},handleCurrentChange:function(t){this.$store.state.floorGoodOffset=(t-1)*this.$store.state.floorGoodLimit},add:function(){setTimeout(function(){var t=document.getElementsByClassName("v-modal")[0];document.getElementsByTagName("body")[0].removeChild(t)},20),this.show=!0,this.dialogFormVisible1=!0,this.ModelGood.productNo="",this.ModelGood.title="",this.ModelGood.memo="",this.ModelGood.salePrice="",this.ModelGood.sort="",this.ModelGood.status="",this.ModelGood.url="",this.$store.state.floor.Code?this.ModelGood.relationCode=this.$store.state.floor.Code:this.ModelGood.relationCode=this.$store.state.floorCode,this.ModelGood.kind="specialactivity"},handleSuccess:function(t,e){this.fileList=[];var o={};o.url=t.ServerUrl+t.FilePath,this.fileList.push(o),this.Image=[],this.Image.push(t)},save:function(){var t=this,e=this;this.$refs.ModelGood.validate(function(o){if(!o)return void(t.dialogFormVisible1=!0);t.dialogFormVisible1=!1,t.ModelGood.status=t.value,t.ModelGood.salePrice||delete t.ModelGood.salePrice,t.ModelGood.recid&&delete t.ModelGood.recid,a.a.get("/server/addOne?param="+s()(t.ModelGood)).then(function(t){e.open5();var o={};e.$store.dispatch("GetCodeGoods"),o.recid=t.data.recid;for(var l in e.ModelGood)o[l]=e.ModelGood[l];e.$store.state.floorGoods||(e.$store.state.floorGoods=[]),e.$store.state.floorGoods.push(o)})})},edit1:function(t){this.show=!1,this.Good=t,this.dialogFormVisible1=!0;for(var e in t)this.ModelGood[e]=t[e];setTimeout(function(){var t=document.getElementsByClassName("v-modal")[0];document.getElementsByTagName("body")[0].removeChild(t)},20)},comfire:function(){var t=this,e=this;this.$refs.ModelGood.validate(function(o){if(!o)return void(t.dialogFormVisible1=!0);t.dialogFormVisible1=!1;for(var l in t.ModelGood)t.Good[l]=t.ModelGood[l];t.ModelGood.salePrice||delete t.ModelGood.salePrice,a.a.get("/server/update?RECID="+t.Good.recid+"&param="+s()(t.ModelGood)).then(function(t){e.open4()})})},removegood:function(t,e,o){var l=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.$message({type:"success",message:"删除成功!"});var s=l;o.splice(e,1),a.a.get("/server/deleteOne?RECID="+t.recid).then(function(t){s.$store.dispatch("GetCodeGoods")})}).catch(function(){l.$message({type:"info",message:"已取消删除"})})},open3:function(){this.$notify({title:"成功",message:"楼层添加成功，返回或添加商品",type:"success"})},open4:function(){this.$notify({title:"成功",message:"楼层修改成功",type:"success"})},open5:function(){this.$notify({title:"成功",message:"商品添加成功",type:"success"})},open6:function(){this.$notify({title:"成功",message:"商品修改成功",type:"success"})},open7:function(){this.$notify({title:"成功",message:"商品删除成功",type:"success"})},cancel:function(){this.dialogFormVisible1=!1,this.ModelGood.productNo="",this.ModelGood.title="",this.ModelGood.memo="",this.ModelGood.salePrice="",this.ModelGood.sort="",this.ModelGood.status="",this.ModelGood.url="",this.ModelGood.relationCode="",this.ModelGood.relationCode=this.$store.state.floor.Code,this.ModelGood.kind="specialactivity"},savefloor:function(){var t=this;if(this.DataShow=!0,this.$store.state.Index||"0"==this.$store.state.Index){var e=JSON.parse(this.$store.state.specitalPorject.navigationConfig),o=e[this.$store.state.Index];o.Title=this.floor.Title,o.TempId=this.value1,this.Image.length>0&&(o.Image=this.Image),a.a.get("/server/FloorUpdate?RECID="+this.$store.state.specitalPorject.recid+"&param="+s()(e)).then(function(e){t.open3(),t.$store.dispatch("GetGoods",{id:t.$store.state.specitalPorject.recid})})}else{var o={};if(o.TempId=this.value1,o.Title=this.floor.Title,o.Image=this.Image,o.Code=this.$store.state.floorCode,this.$store.state.specitalPorject.navigationConfig.length>0)var e=JSON.parse(this.$store.state.specitalPorject.navigationConfig);else var e=[];e.push(o);var l=null;l=this.$store.state.specitalPorject.recid?this.$store.state.specitalPorject.recid:this.$store.state.recid,a.a.get("/server/FloorUpdate?RECID="+l+"&param="+s()(e)).then(function(e){t.open3(),t.$store.state.specitalPorject.recid?t.$store.dispatch("GetGoods",{id:t.$store.state.specitalPorject.recid}):t.$store.dispatch("GetGoods",{id:t.$store.state.recid})})}}}}},"FZ+b":function(t,e,o){"use strict";var l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"padding-top":"35px"},attrs:{id:"floor"}},[o("el-form",{staticClass:"demo-table-expand fl",attrs:{inline:"",model:t.floor}},[o("el-form-item",{staticClass:"fl",staticStyle:{width:"100%","text-align":"center"},attrs:{label:"楼层标题",props:"Title"}},[o("el-input",{model:{value:t.floor.Title,callback:function(e){t.$set(t.floor,"Title",e)},expression:"floor.Title"}})],1),t._v(" "),o("el-form-item",{staticClass:"fl",staticStyle:{width:"100%","text-align":"center"},attrs:{label:"楼层模板",props:"value1"}},[o("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择活动区域"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},[o("el-option",{attrs:{label:"水平模板",value:"0"}}),t._v(" "),o("el-option",{attrs:{label:"垂直模板",value:"1"}})],1)],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%","text-align":"center"},attrs:{label:"楼层图片",props:"endTime"}},[[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/server/file","on-success":t.handleSuccess,"file-list":t.fileList,"list-type":"picture"}},[o("el-button",{staticStyle:{float:"left"},attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),o("div",{staticClass:"el-upload__tip",staticStyle:{float:"left"},attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)]],2),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.DataShow,expression:"DataShow"}],staticStyle:{width:"100%","text-align":"right"},attrs:{props:"endTime"}},[o("div",{staticStyle:{width:"100%"},attrs:{id:"seach"}},[o("el-form",[o("el-form-item",[o("el-input",{attrs:{placeholder:"标题搜索"},model:{value:t.SelectData,callback:function(e){t.SelectData=e},expression:"SelectData"}})],1),t._v(" "),o("el-form-item",{staticStyle:{"text-align":"left"}},[o("el-button",{attrs:{type:"primary"},on:{click:t.Select}},[t._v("查询")])],1)],1)],1)]),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.DataShow,expression:"DataShow"}],staticClass:"floor",staticStyle:{width:"100%","text-align":"center"},attrs:{label:"楼层商品"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.floorGoods,border:""}},[o("el-table-column",{attrs:{prop:"productNo",label:"商品编码",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("a",{attrs:{href:t.floorGoods[e.$index].url,target:"_blank"}},[t._v(t._s(t.floorGoods[e.$index].productNo))]),t._v(t._s(t.floorGoods[e.$index].title)+"\n\t\t    \t")]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"memo",label:"商品描述",width:"200"}}),t._v(" "),o("el-table-column",{attrs:{prop:"salePrice",label:"商品价格",width:"100"}}),t._v(" "),o("el-table-column",{attrs:{prop:"sort",label:"商品排序",width:"100"}}),t._v(" "),o("el-table-column",{attrs:{prop:"status",label:"商品状态",width:"100"}}),t._v(" "),o("el-table-column",{attrs:{prop:"",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){t.removegood(e.row,e.$index,t.floorGoods)}}},[t._v("删除")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){t.edit1(e.row)}}},[t._v("编辑")])]}}])})],1)]}}])}),t._v(" "),t._v("' ' props = 'endTime' style='box-sizing: border-box;width:100%;padding-top:30px;padding-left:15%;padding-right:10%;'>\n     "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.DataShow,expression:"DataShow"}],staticClass:"block",staticStyle:{"text-aling":"center","box-sizing":"border-box","padding-left":"30%"}},[o("el-pagination",{attrs:{"current-page":t.currentPage4,"page-sizes":[t.floorGoodLimit],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.floorGoodCount},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),o("el-form-item",{staticStyle:{"box-sizing":"border-box",width:"100%","padding-top":"30px","padding-left":"10%","padding-right":"10%"},attrs:{label:"  "}},[o("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){t.back()}}},[t._v("返回")]),t._v(" "),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.savefloor()}}},[t._v("保存楼层")]),t._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.DataShow,expression:"DataShow"}],staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.add()}}},[t._v("添加商品")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"收货地址",visible:t.dialogFormVisible1,id:"dl"},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[o("el-form",{ref:"ModelGood",attrs:{model:t.ModelGood,inline:"",rules:t.rules}},[o("el-form-item",{staticClass:"short",attrs:{label:"商品编码",prop:"productNo"}},[o("el-input",{model:{value:t.ModelGood.productNo,callback:function(e){t.$set(t.ModelGood,"productNo",e)},expression:"ModelGood.productNo"}})],1),t._v(" "),o("el-form-item",{staticClass:"short",attrs:{label:"商品价格",prop:"salePrice"}},[o("el-input",{model:{value:t.ModelGood.salePrice,callback:function(e){t.$set(t.ModelGood,"salePrice",e)},expression:"ModelGood.salePrice"}})],1),t._v(" "),o("el-form-item",{staticClass:"short",attrs:{label:"商品排序",prop:"sort"}},[o("el-input",{model:{value:t.ModelGood.sort,callback:function(e){t.$set(t.ModelGood,"sort",e)},expression:"ModelGood.sort"}})],1),t._v(" "),o("el-form-item",{staticClass:"short",attrs:{label:"商品状态"}},[o("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[o("el-option",{attrs:{label:"有效",value:"1"}}),t._v(" "),o("el-option",{attrs:{label:"无效",value:"0"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"商品标题"}},[o("el-input",{model:{value:t.ModelGood.title,callback:function(e){t.$set(t.ModelGood,"title",e)},expression:"ModelGood.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"商品描述"}},[o("el-input",{model:{value:t.ModelGood.memo,callback:function(e){t.$set(t.ModelGood,"memo",e)},expression:"ModelGood.memo"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"商品连接"}},[o("el-input",{model:{value:t.ModelGood.url,callback:function(e){t.$set(t.ModelGood,"url",e)},expression:"ModelGood.url"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.cancel()}}},[t._v("取 消")]),t._v(" "),t.show?o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("保 存")]):o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.comfire()}}},[t._v("确定")])],1)],1)],1)},s=[],i={render:l,staticRenderFns:s};e.a=i},NRp5:function(t,e,o){"use strict";function l(t){o("Nzxa")}Object.defineProperty(e,"__esModule",{value:!0});var s=o("CfED"),i=o("FZ+b"),a=o("VU/8"),r=l,d=a(s.a,i.a,!1,r,null,null);e.default=d.exports},Nzxa:function(t,e,o){var l=o("V7SM");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);o("rjj0")("ad769e4e",l,!0)},V7SM:function(t,e,o){e=t.exports=o("FZ+f")(!1),e.push([t.i,".fl .el-form-item__content{width:70%}#floor #dl .el-form-item{width:100%}#floor #dl .short{width:48%}#dl .el-form-item__content{width:80%}#floor .demo-table-expand label{width:8%}#floor .demo-table-expand .el-form-item__label{width:100px}#floor #seach .el-form{width:100%}#floor #seach .el-form .el-form-item{width:30%;float:left}a{text-decoration:none;color:#5a5e66}.upload-demo{width:60%}.upload-demo img{width:100px}#floor .upload-demo{position:relative;height:160px}#floor .el-upload .el-button{position:absolute;bottom:8px;left:0}#floor .el-upload-list{position:absolute;top:0;left:0}#floor .el-upload__tip{position:absolute;bottom:0;left:15%}",""])},mvHQ:function(t,e,o){t.exports={default:o("qkKv"),__esModule:!0}},qkKv:function(t,e,o){var l=o("FeBl"),s=l.JSON||(l.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}}});